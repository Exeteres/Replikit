# Интернационализация

Пакет `@replikit/i18n` предоставляет простую строготипизированную систему интернационализации.

## Базовое использование

Для объявления ресурса надо расширить интерфейс `Locale`:

```ts
import "@replikit/i18n/typings";

declare module "@replikit/i18n/typings/locale" {
    export interface Locale {
        mymodule: {
            hello: string;
        }
    }
}
```

И добавить перевод для конкретного языка:

```ts
import { locales } from "@replikit/i18n";

locales.add("ru", "mymodule", {
    hello: "Привет!"
});
```

После чего можно использовать локализацию в контексте маршрутизатора:

```ts
import { router } from "@replikit/router";

router.of("message:received").use(context => {
    context.reply(context.t.mymodule.hello);
});
```

## Форматирование

Поскольку локализация осуществляется обычными JS объектами, помимо строк можно также использовать функции.
Вместе с синтаксисом ES6 шаблонов получается полноценное форматирование:

```ts
export interface Locale {
    mymodule: {
        hello(name: string): string;
    }
}

locales.add("ru", "mymodule", {
    hello: name => `Привет, ${name}`
});

router.of("message:received").use(context => {
    const { account } = context;
    const name = account.firstName ?? account.username
    context.reply(context.t.mymodule.hello(name));
});
```

## Плюрализация

Плюрализация достигается использованием функций-хелперов для каждого конкретного языка.
В `@replikit/i18n` существует встроенные хелперы для некоторых языков:

```ts
export interface Locale {
    mymodule: {
        apples(count: number): string;
    }
}

import { ru } from "@replikit/i18n";

locales.add("ru", "mymodule", {
    apples: count => ru.plural(count, "1 яблоко", "$ яблока", `$ яблок`)
});
```
